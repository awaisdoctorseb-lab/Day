<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="pic3.WEBP">
    <title>Notes</title>
    <style>
        :root { --ios-font: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: var(--ios-font); overflow: hidden; background: #000; }

        /* Status Bar Overlay */
        .status-bar {
            position: absolute; top: 0; width: 100%; height: 44px;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 25px; color: white; font-size: 14px; font-weight: 600; z-index: 1000;
            pointer-events: none;
        }
        .status-right { display: flex; gap: 5px; align-items: center; }
        .battery { width: 22px; height: 11px; border: 1px solid rgba(255,255,255,0.5); border-radius: 3px; position: relative; }
        .battery::after { content: ''; position: absolute; right: -3px; top: 3px; width: 2px; height: 4px; background: rgba(255,255,255,0.5); border-radius: 0 1px 1px 0; }
        .battery-level { position: absolute; left: 1px; top: 1px; bottom: 1px; width: 80%; background: white; border-radius: 1px; }

        #screen { width: 100%; height: 100%; position: relative; background: url('wall.jpg') center/cover no-repeat; }

        /* --- LOCK SCREEN --- */
        #lock-screen { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; color: white; z-index: 10; padding-top: 100px; }
        #lock-time { font-size: 85px; font-weight: 200; }
        #lock-date { font-size: 22px; font-weight: 400; margin-top: -10px; }

        /* --- PASSCODE SCREEN --- */
        #passcode-screen { position: absolute; inset: 0; background: rgba(0,0,0,0.3); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px); display: none; flex-direction: column; align-items: center; justify-content: center; color: white; z-index: 20; }
        .passcode-dots { display: flex; gap: 20px; margin-bottom: 40px; }
        .dot { width: 14px; height: 14px; border: 1.5px solid white; border-radius: 50%; }
        .dot.filled { background: white; }
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px 25px; }
        .key { width: 82px; height: 82px; border-radius: 50%; background: rgba(255,255,255,0.15); display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; }
        .key span:first-child { font-size: 36px; line-height: 1; }
        .key span:last-child { font-size: 10px; letter-spacing: 1px; font-weight: 600; margin-top: 2px; }
        .keypad-footer { width: 80%; display: flex; justify-content: space-between; margin-top: 40px; font-weight: 500; font-size: 16px; }

        /* --- HOME SCREEN --- */
        #home-screen { position: absolute; inset: 0; display: none; padding: 60px 25px; }
        .icon-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px 20px; }
        .app-icon { display: flex; flex-direction: column; align-items: center; font-size: 12px; color: white; text-align: center; }
        .app-icon img { width: 62px; height: 62px; border-radius: 14px; margin-bottom: 5px; }
        .dock { position: absolute; bottom: 15px; left: 10px; right: 10px; height: 95px; background: url('bar.jpg') center/cover no-repeat; border-radius: 35px; overflow: hidden; display: flex; justify-content: space-around; align-items: center; padding: 0 10px; }

        /* --- NOTES APP --- */
        #notes-app { position: absolute; inset: 0; background: #000; z-index: 100; display: none; flex-direction: column; color: white; padding-top: 44px; }
        .notes-list-header { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; color: #d4a017; font-size: 18px; }
        .notes-container { flex: 1; overflow-x: hidden; overflow-y: auto; padding: 0 20px; }
        .notes-container h1 { font-size: 34px; margin: 10px 0; }
        
        /* Swipe to Delete Styling */
        .note-row { position: relative; width: 100%; overflow: hidden; background: #1c1c1e; margin-bottom: 1px; border-radius: 10px; }
        .note-item { 
            padding: 15px; position: relative; z-index: 2; background: #1c1c1e;
            transition: transform 0.3s ease; display: flex; flex-direction: column;
        }
        .note-item .title { font-weight: bold; font-size: 17px; }
        .note-item .preview { color: #888; font-size: 14px; margin-top: 4px; }
        .delete-btn { 
            position: absolute; right: 0; top: 0; bottom: 0; width: 80px; 
            background: #ff3b30; color: white; display: flex; align-items: center; 
            justify-content: center; font-weight: 600; z-index: 1; 
        }

        .new-note-btn { position: absolute; bottom: 40px; right: 30px; color: #d4a017; font-size: 35px; z-index: 105; }

        /* Editor */
        #note-editor { position: absolute; inset: 0; background: #000; display: none; flex-direction: column; z-index: 110; padding-top: 44px; }
        .editor-header { padding: 10px 20px; display: flex; justify-content: space-between; color: #d4a017; font-size: 18px; }
        #editor-textarea { flex: 1; background: transparent; border: none; color: white; padding: 20px; font-size: 18px; caret-color: #d4a017; resize: none; line-height: 1.5; }
        
        .shake { animation: shake 0.3s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
    </style>
</head>
<body onload="init()">

<div class="status-bar">
    <div id="status-time">12:00</div>
    <div class="status-right">
        <span>üì∂</span><span>üîã</span>
        <div class="battery"><div class="battery-level"></div></div>
    </div>
</div>

<div id="screen" onclick="showPasscode()">
    <div id="lock-screen">
        <div id="lock-time">12:00</div>
        <div id="lock-date">Friday, 16 January</div>
    </div>

    <div id="passcode-screen">
        <p style="margin-bottom:25px; font-weight:500;">Enter Passcode</p>
        <div class="passcode-dots">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
        <div class="keypad" id="keypad"></div>
        <div class="keypad-footer">
            <span>Emergency</span>
            <span onclick="hidePasscode(event)">Cancel</span>
        </div>
    </div>

    <div id="home-screen">
        <div class="icon-grid" id="icons"></div>
        <div class="dock"></div>
    </div>
</div>

<div id="notes-app">
    <div class="notes-list-header">
        <span>&lt; Folders</span>
        <span style="border:1px solid #d4a017; border-radius:50%; width:24px; height:24px; display:flex; align-items:center; justify-content:center; font-size:14px;">...</span>
    </div>
    <div class="notes-container">
        <h1>Notes</h1>
        <div id="notes-list-content"></div>
    </div>
    <div class="new-note-btn" onclick="createNewNote()">üìù</div>
</div>

<div id="note-editor">
    <div class="editor-header">
        <span onclick="closeEditor()">&lt; Notes</span>
        <span onclick="saveAndExit()">Done</span>
    </div>
    <textarea id="editor-textarea" autofocus></textarea>
</div>

<script>
    let inputCode = "";
    let currentReveal = { day: "", date: "" };
    let notes = JSON.parse(localStorage.getItem('iosNotes')) || [{text: "Sample Note\nTap to edit or swipe to delete."}];
    let activeNoteIndex = null;
    let startX = 0;

    const keys = [
        {n:'1', l:''}, {n:'2', l:'A B C'}, {n:'3', l:'D E F'},
        {n:'4', l:'G H I'}, {n:'5', l:'J K L'}, {n:'6', l:'M N O'},
        {n:'7', l:'P Q R S'}, {n:'8', l:'T U V'}, {n:'9', l:'W X Y Z'},
        {n:'', l:''}, {n:'0', l:''}, {n:'', l:''}
    ];

    const apps = [
        {name: 'iTunes', img: 'pic1.WEBP'}, {name: 'Clock', img: 'pic2.WEBP'},
        {name: 'Notes', img: 'pic3.WEBP', action: 'openNotes'}, {name: 'Safari', img: 'pic4.WEBP'},
        {name: 'Wallet', img: 'pic5.PNG'}, {name: 'Reminders', img: 'pic6.PNG'},
        {name: 'Settings', img: 'pic7.PNG'}, {name: 'Weather', img: 'pic8.PNG'},
        {name: 'Music', img: 'pic9.PNG'}
    ];

    function init() {
        const keypad = document.getElementById('keypad');
        keys.forEach(k => {
            const div = document.createElement('div');
            div.className = 'key';
            if(k.n !== '') {
                div.innerHTML = `<span>${k.n}</span><span>${k.l}</span>`;
                div.onclick = (e) => { e.stopPropagation(); handleKey(k.n); };
            } else { div.style.background = "none"; }
            keypad.appendChild(div);
        });

        const grid = document.getElementById('icons');
        apps.forEach(app => {
            const div = document.createElement('div');
            div.className = 'app-icon';
            div.innerHTML = `<img src="${app.img}"><span>${app.name}</span>`;
            if(app.action) div.onclick = (e) => { e.stopPropagation(); window[app.action](); };
            grid.appendChild(div);
        });

        setInterval(updateClock, 1000);
        updateClock();
        renderNotesList();
    }

    function updateClock() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('en-US', { hour12: true, hour: 'numeric', minute: '2-digit' }).replace(/\s?[AP]M/g, '');
        document.getElementById('lock-time').innerText = timeStr;
        document.getElementById('status-time').innerText = timeStr;
        document.getElementById('lock-date').innerText = now.toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'long' });
    }

    function handleKey(num) {
        if(inputCode.length < 4) {
            inputCode += num;
            updateDots();
            if(inputCode.length === 4) validate();
        }
    }

    function updateDots() {
        document.querySelectorAll('.dot').forEach((dot, i) => dot.classList.toggle('filled', i < inputCode.length));
    }

    function validate() {
        const dayMap = {12:"Monday", 23:"Tuesday", 34:"Wednesday", 45:"Thursday", 56:"Friday", 67:"Saturday", 78:"Sunday"};
        const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        
        const d1 = (inputCode[0]=='0'?9:inputCode[0]-1), d2 = (inputCode[1]=='0'?9:inputCode[1]-1);
        const d3 = (inputCode[2]=='0'?9:inputCode[2]-1), d4 = (inputCode[3]=='0'?9:inputCode[3]-1);
        
        const dateVal = parseInt(`${d1}${d2}`);
        const monthVal = parseInt(`${d3}${d4}`);

        if (inputCode.endsWith("80") && dayMap[inputCode.substring(0,2)]) {
            currentReveal.day = dayMap[inputCode.substring(0,2)];
            unlock();
        } else if (dateVal >= 1 && dateVal <= 31 && monthVal >= 1 && monthVal <= 12) {
            currentReveal.date = `${dateVal} ${months[monthVal-1]}`;
            unlock();
        } else {
            document.getElementById('passcode-screen').classList.add('shake');
            setTimeout(() => { document.getElementById('passcode-screen').classList.remove('shake'); inputCode = ""; updateDots(); }, 300);
        }
    }

    function unlock() {
        document.getElementById('passcode-screen').style.display = 'none';
        document.getElementById('home-screen').style.display = 'block';
        notes = notes.map(n => {
            let t = n.text;
            if(currentReveal.day) t = t.replace(/dddd/g, currentReveal.day);
            if(currentReveal.date) t = t.replace(/ddmm/g, currentReveal.date);
            return { ...n, text: t };
        });
        saveNotes();
        renderNotesList();
    }

    function renderNotesList() {
        const list = document.getElementById('notes-list-content');
        list.innerHTML = "";
        notes.forEach((note, i) => {
            const row = document.createElement('div');
            row.className = 'note-row';
            const lines = note.text.split('\n');
            row.innerHTML = `
                <div class="delete-btn" onclick="deleteNote(${i})">Delete</div>
                <div class="note-item" ontouchstart="handleTouchStart(event)" ontouchmove="handleTouchMove(event, this)" onclick="openEditor(${i})">
                    <span class="title">${lines[0] || 'New Note'}</span>
                    <span class="preview">${lines[1] || 'No extra text'}</span>
                </div>`;
            list.appendChild(row);
        });
    }

    function handleTouchStart(e) { startX = e.touches[0].clientX; }
    function handleTouchMove(e, el) {
        let diff = startX - e.touches[0].clientX;
        if (diff > 0 && diff < 100) el.style.transform = `translateX(-${diff}px)`;
        if (diff <= 0) el.style.transform = `translateX(0px)`;
    }

    function deleteNote(i) { notes.splice(i, 1); saveNotes(); renderNotesList(); }
    function openNotes() { document.getElementById('notes-app').style.display = 'flex'; }
    function createNewNote() { activeNoteIndex = notes.length; notes.push({text: ""}); openEditor(activeNoteIndex); }
    function openEditor(index) { activeNoteIndex = index; document.getElementById('editor-textarea').value = notes[index].text; document.getElementById('note-editor').style.display = 'flex'; }
    function saveAndExit() { notes[activeNoteIndex].text = document.getElementById('editor-textarea').value; saveNotes(); renderNotesList(); closeEditor(); }
    function closeEditor() { document.getElementById('note-editor').style.display = 'none'; }
    function saveNotes() { localStorage.setItem('iosNotes', JSON.stringify(notes)); }
    function showPasscode() { document.getElementById('lock-screen').style.display = 'none'; document.getElementById('passcode-screen').style.display = 'flex'; }
    function hidePasscode(e) { e.stopPropagation(); document.getElementById('lock-screen').style.display = 'flex'; document.getElementById('passcode-screen').style.display = 'none'; inputCode = ""; updateDots(); }
</script>
</body>
</html>
