<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        :root { --ios-yellow: #ffcc00; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: -apple-system, sans-serif; overflow: hidden; background: #000; color: white; }
        
        /* Full Screen Wallpaper */
        .screen { position: absolute; width: 100%; height: 100%; display: none; z-index: 10; }
        .active { display: flex; flex-direction: column; }
        .bg-wallpaper { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1; }

        /* Lock Screen */
        #lock-screen { align-items: center; justify-content: flex-start; }
        #clock { font-size: 80px; font-weight: 200; margin-top: 100px; }
        #date-header { font-size: 20px; margin-top: -10px; }

        /* Keypad UI */
        #keypad-screen { background: rgba(0,0,0,0.4); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); align-items: center; justify-content: center; }
        .dots { display: flex; gap: 20px; margin-bottom: 50px; }
        .dot { width: 14px; height: 14px; border: 1.5px solid white; border-radius: 50%; }
        .dot.filled { background: white; }
        .keypad { display: grid; grid-template-columns: repeat(3, 90px); gap: 20px; }
        .key { width: 90px; height: 90px; border-radius: 50%; background: rgba(255,255,255,0.15); display: flex; align-items: center; justify-content: center; font-size: 36px; cursor: pointer; }
        .footer-nav { position: absolute; bottom: 60px; width: 80%; display: flex; justify-content: space-between; font-size: 18px; }

        /* Home Screen */
        #home-screen { padding: 60px 25px; }
        .icon-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; }
        .icon-grid img { width: 62px; height: 62px; border-radius: 14px; }
        .dock-container { position: absolute; bottom: 25px; width: 90%; height: 95px; align-self: center; border-radius: 35px; overflow: hidden; }
        .dock-img { width: 100%; height: 100%; object-fit: cover; }

        /* Notes App Interface */
        #notes-list-screen { background: #000; padding: 20px; }
        .notes-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .notes-bold-title { font-size: 34px; font-weight: bold; }
        .note-item { padding: 15px 0; border-bottom: 0.5px solid #333; cursor: pointer; }
        .note-item b { font-size: 18px; display: block; }
        .note-item small { color: #888; }
        .add-note-icon { position: absolute; bottom: 40px; right: 30px; font-size: 32px; color: var(--ios-yellow); }

        /* Note Editor */
        #editor-screen { background: #000; padding: 20px; }
        .editor-header { display: flex; justify-content: space-between; color: var(--ios-yellow); font-size: 18px; margin-bottom: 10px; }
        .note-textarea { width: 100%; height: 85vh; background: none; border: none; color: white; font-size: 18px; outline: none; caret-color: var(--ios-yellow); line-height: 1.6; }
    </style>
</head>
<body onclick="triggerKeypad()">

    <img src="wallpaper.jpg" class="bg-wallpaper">

    <div id="lock-screen" class="screen active">
        <div id="clock">12:00</div>
        <div id="date-header">Friday, 16 January</div>
    </div>

    <div id="keypad-screen" class="screen">
        <div style="margin-bottom:20px">Enter Password</div>
        <div class="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        <div class="keypad" id="numpad"></div>
        <div class="footer-nav"><span>Emergency</span><span onclick="cancelPass()">Cancel</span></div>
    </div>

    <div id="home-screen" class="screen">
        <div class="icon-grid" id="home-icons"></div>
        <div class="dock-container" onclick="openNotes()"><img src="bar.jpg" class="dock-img"></div>
    </div>

    <div id="notes-list-screen" class="screen">
        <div class="notes-header">
            <span style="color:var(--ios-yellow)" onclick="showScreen('home-screen')">Home</span>
            <div style="width:25px; height:25px; border:1.5px solid white; border-radius:50%; text-align:center; line-height:20px;">...</div>
        </div>
        <div class="notes-bold-title" style="text-align:right">Notes</div>
        <div id="list-container"></div>
        <div class="add-note-icon" onclick="createNote()">üìù</div>
    </div>

    <div id="editor-screen" class="screen">
        <div class="editor-header"><span onclick="saveAndGoBack()">Done</span></div>
        <textarea id="note-body" class="note-textarea"></textarea>
    </div>

    <script>
        let currentPass = "";
        let allNotes = JSON.parse(localStorage.getItem('ios_notes')) || [];
        let editingIdx = null;

        const dayCodes = {"12":"Monday", "23":"Tuesday", "34":"Wednesday", "45":"Thursday", "56":"Friday", "67":"Saturday", "78":"Sunday"};
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        function updateClock() {
            const now = new Date();
            let h = now.getHours() % 12 || 12;
            let m = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('clock').innerText = h + ":" + m;
            document.getElementById('date-header').innerText = now.toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'long' });
        }
        setInterval(updateClock, 1000); updateClock();

        const pad = document.getElementById('numpad');
        [1,2,3,4,5,6,7,8,9,null,0,null].forEach(v => {
            const k = document.createElement('div');
            if(v !== null) { k.className = 'key'; k.innerText = v; k.onclick = (e) => { e.stopPropagation(); typeNum(v); } }
            pad.appendChild(k);
        });

        function triggerKeypad() { if(document.getElementById('lock-screen').classList.contains('active')) showScreen('keypad-screen'); }
        function cancelPass() { currentPass = ""; updateDots(); showScreen('lock-screen'); }

        function typeNum(v) {
            if(currentPass.length < 4) {
                currentPass += v; updateDots();
                if(currentPass.length === 4) setTimeout(validatePass, 200);
            }
        }

        function updateDots() {
            const dots = document.querySelectorAll('.dot');
            dots.forEach((d, i) => d.classList.toggle('filled', i < currentPass.length));
        }

        function validatePass() {
            let dayText = null;
            let dateText = null;

            if(currentPass.endsWith("80")) {
                dayText = dayCodes[currentPass.substring(0,2)];
            } else {
                // Trick 2: Input - 1111 logic
                let result = (parseInt(currentPass) - 1111).toString().padStart(4, '0');
                let d = parseInt(result.substring(0,2));
                let m = parseInt(result.substring(2,4));
                if(m >= 1 && m <= 12) dateText = `${d} ${monthNames[m-1]}`;
            }

            allNotes = allNotes.map(n => {
                let content = n.text;
                if(dayText) content = content.replace(/dddd/g, dayText);
                if(dateText) content = content.replace(/ddmm/g, dateText);
                return { ...n, text: content };
            });

            showScreen('home-screen');
            currentPass = ""; updateDots();
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // Home Icons
        const grid = document.getElementById('home-icons');
        for(let i=1; i<=9; i++) grid.innerHTML += `<img src="pic${i}.png">`;

        // Notes Logic
        function openNotes() { showScreen('notes-list-screen'); renderList(); }
        function renderList() {
            const container = document.getElementById('list-container');
            container.innerHTML = '';
            allNotes.forEach((n, i) => {
                const div = document.createElement('div');
                div.className = 'note-item';
                div.innerHTML = `<b>${n.text.split('\n')[0] || 'New Note'}</b><small>${n.text.substring(0,35)}...</small>`;
                div.onclick = () => { editingIdx = i; document.getElementById('note-body').value = n.text; showScreen('editor-screen'); };
                container.appendChild(div);
            });
        }

        function createNote() { editingIdx = null; document.getElementById('note-body').value = ""; showScreen('editor-screen'); }
        function saveAndGoBack() {
            const content = document.getElementById('note-body').value;
            if(editingIdx !== null) allNotes[editingIdx].text = content;
            else if(content) allNotes.push({text: content});
            localStorage.setItem('ios_notes', JSON.stringify(allNotes));
            openNotes();
        }
    </script>
</body>
</html>
