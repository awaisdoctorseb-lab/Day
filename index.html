<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notes</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,sans-serif}
body{background:black;height:100vh;overflow:hidden}

/* WALLPAPER */
.wallpaper{
  position:fixed;inset:0;
  background:url('wall.jpg') center/cover no-repeat;
}

/* LOCK SCREEN */
#lockscreen{
  position:absolute;inset:0;
  color:white;z-index:2;
  display:flex;flex-direction:column;
  justify-content:space-between;
  align-items:center;
  padding:70px 0 40px;
}
#time{font-size:72px;font-weight:300}
#date{font-size:20px;margin-top:6px}

/* KEYPAD */
#keypad{
  position:absolute;inset:0;
  background:rgba(0,0,0,.25);
  backdrop-filter:blur(18px);
  display:none;
  flex-direction:column;
  justify-content:flex-end;
  align-items:center;
  padding-bottom:60px;
  z-index:3;
}
#dots{display:flex;gap:12px;margin-bottom:30px}
.dot{width:12px;height:12px;border-radius:50%;border:1px solid #fff}
.dot.filled{background:#fff}
.keys{display:grid;grid-template-columns:repeat(3,80px);gap:20px}
.key,.spacer{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center}
.key{border:1px solid #fff;color:#fff;font-size:28px}
.spacer{pointer-events:none}

/* NOTES LIST */
#notesList{
  position:absolute;inset:0;
  background:#000;
  color:white;
  z-index:4;
  display:none;
}
.header{
  height:50px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
}
.noteCard{
  margin:12px;
  padding:14px;
  background:#1c1c1e;
  border-radius:14px;
}
.noteTitle{font-size:17px}
.noteMeta{font-size:13px;color:#aaa;margin-top:4px}

/* EDIT NOTE */
#editor{
  position:absolute;inset:0;
  background:#000;
  z-index:5;
  display:none;
  flex-direction:column;
}
.editorHeader{
  height:50px;
  display:flex;
  align-items:center;
  padding:0 12px;
  color:#ffcc00;
}
.editorHeader span{flex:1;text-align:center;color:white;font-weight:600}
#editor textarea{
  flex:1;
  background:#000;
  color:white;
  border:none;
  padding:16px;
  font-size:18px;
  line-height:1.45;
  caret-color:#ffcc00;
  outline:none;
}
</style>
</head>

<body>

<div class="wallpaper"></div>

<div id="lockscreen" onclick="showKeypad()">
  <div>
    <div id="time"></div>
    <div id="date"></div>
  </div>
  <div>Swipe up to unlock</div>
</div>

<div id="keypad">
  <div id="dots"></div>
  <div class="keys" id="keys"></div>
</div>

<div id="notesList">
  <div class="header">Notes</div>
  <div id="notesContainer"></div>
</div>

<div id="editor">
  <div class="editorHeader">
    <div onclick="closeEditor()">â€¹ Notes</div>
    <span>Notes</span>
    <div></div>
  </div>
  <textarea id="editorText"></textarea>
</div>

<script>
/* TIME */
function updateTime(){
  const n=new Date();
  let h=n.getHours()%12||12;
  time.textContent=h+":"+String(n.getMinutes()).padStart(2,'0');
  date.textContent=n.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'});
}
setInterval(updateTime,1000);updateTime();

/* KEYPAD */
const dots=document.getElementById('dots');
const keys=document.getElementById('keys');
let input='';
for(let i=0;i<4;i++)dots.appendChild(document.createElement('div')).className='dot';
[1,2,3,4,5,6,7,8,9].forEach(addKey);
keys.appendChild(document.createElement('div')).className='spacer';
addKey(0);
keys.appendChild(document.createElement('div')).className='spacer';

function addKey(n){
  let k=document.createElement('div');
  k.className='key';
  k.textContent=n;
  k.onclick=()=>press(n);
  keys.appendChild(k);
}
function press(n){
  if(input.length>=4)return;
  input+=n;
  dots.children[input.length-1].classList.add('filled');
  if(input.length===4)setTimeout(unlock,300);
}
function decode(c){return c.split('').map(d=>d==='0'?'9':d-1).join('');}

/* NOTES DATA */
let notes=JSON.parse(localStorage.getItem('notes')||'[]');
let currentIndex=null;

function unlock(){
  const decoded=decode(input);
  const weekdayMap={
    "0179":"Monday","1279":"Tuesday","2379":"Wednesday",
    "3479":"Thursday","4579":"Friday","5679":"Saturday","6779":"Monday"
  };
  let day=+decoded.slice(0,2);
  let month=+decoded.slice(2,4);
  let weekday=null;

  if(input.endsWith("80")) weekday=weekdayMap[decoded];
  if((day>=1&&day<=31&&month>=1&&month<=12)||weekday){
    applySecrets(day,month,weekday);
    showNotes();
  }
  reset();
}

function applySecrets(day,month,weekday){
  const months=["","January","February","March","April","May","June","July","August","September","October","November","December"];
  const now=new Date().toLocaleTimeString([], {hour:'numeric',minute:'2-digit'});
  notes.forEach(n=>{
    let t=n.text;
    if(day&&month){
      t=t.replace(/\bdd\b/g,day).replace(/\bmm\b/g,months[month]);
    }
    if(weekday)t=t.replace(/\bdddd\b/g,weekday);
    n.text=t;
    n.time=now;
  });
  saveNotes();
}

function showNotes(){
  lockscreen.style.display='none';
  keypad.style.display='none';
  notesList.style.display='block';
  renderNotes();
}

function renderNotes(){
  notesContainer.innerHTML='';
  notes.forEach((n,i)=>{
    let d=document.createElement('div');
    d.className='noteCard';
    d.onclick=()=>openEditor(i);
    d.innerHTML=`<div class="noteTitle">${n.text.split('\n')[0]||'New Note'}</div>
    <div class="noteMeta">${n.time||''} &nbsp; No additional text</div>`;
    notesContainer.appendChild(d);
  });
}

function openEditor(i){
  currentIndex=i;
  editorText.value=notes[i].text;
  editor.style.display='flex';
  notesList.style.display='none';
}

function closeEditor(){
  notes[currentIndex].text=editorText.value;
  saveNotes();
  editor.style.display='none';
  notesList.style.display='block';
  renderNotes();
}

function saveNotes(){
  localStorage.setItem('notes',JSON.stringify(notes));
}

function showKeypad(){
  keypad.style.display='flex';
}

function reset(){
  input='';
  [...dots.children].forEach(d=>d.classList.remove('filled'));
}
</script>

</body>
</html>